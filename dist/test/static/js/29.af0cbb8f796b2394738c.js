webpackJsonp([29],{782:function(e,n,r){var t=r(33)(r(882),r(811),null,null);t.options.__file="E:\\workspace\\Git\\console.cloud.ttyun.com\\src\\views\\basic-data\\sys-user\\reset-password.vue",t.esModule&&Object.keys(t.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),t.options.functional&&console.error("[vue-loader] reset-password.vue: functional components are not supported with templates, they should use render functions."),e.exports=t.exports},811:function(e,n,r){e.exports={render:function(){var e=this,n=e.$createElement,r=e._self._c||n;return r("div",[r("b-form",{ref:"ruleForm",staticClass:"demo-form",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"80px"}},[r("b-form-item",{attrs:{label:"密码",prop:"password"}},[r("b-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.ruleForm.password,callback:function(n){e.ruleForm.password=n},expression:"ruleForm.password"}})],1),e._v(" "),r("b-form-item",{attrs:{label:"确认密码",prop:"cpassword"}},[r("b-input",{attrs:{type:"password",placeholder:"请输确认密码"},model:{value:e.ruleForm.cpassword,callback:function(n){e.ruleForm.cpassword=n},expression:"ruleForm.cpassword"}})],1),e._v(" "),r("b-form-item",[r("button",{staticClass:"btn btn-mw btn-primary marginbtn",attrs:{type:"button"},on:{click:function(n){e.submitForm()}}},[e._v("保存")]),e._v(" "),r("button",{staticClass:"btn btn-mw btn-default",attrs:{type:"button"},on:{click:e.cancel}},[e._v("取消")])])],1)],1)},staticRenderFns:[]},e.exports.render._withStripped=!0},882:function(e,n,r){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var s=r(94),o=t(s),l=r(93),a=t(l),A=function(){var e="E:\\workspace\\Git\\console.cloud.ttyun.com\\src\\views\\basic-data\\sys-user\\reset-password.vue",n="83d6048798146ddda87235833a8949977d4edc25",r=new Function("return this")(),t="__coverage__",s={path:"E:\\workspace\\Git\\console.cloud.ttyun.com\\src\\views\\basic-data\\sys-user\\reset-password.vue",statementMap:{0:{start:{line:34,column:4},end:{line:63,column:5}},1:{start:{line:52,column:12},end:{line:58,column:13}},2:{start:{line:53,column:14},end:{line:53,column:43}},3:{start:{line:54,column:18},end:{line:58,column:13}},4:{start:{line:55,column:14},end:{line:55,column:47}},5:{start:{line:57,column:14},end:{line:57,column:24}},6:{start:{line:67,column:6},end:{line:67,column:33}},7:{start:{line:68,column:6},end:{line:72,column:8}},8:{start:{line:69,column:8},end:{line:71,column:9}},9:{start:{line:70,column:10},end:{line:70,column:30}},10:{start:{line:75,column:6},end:{line:75,column:39}},11:{start:{line:79,column:6},end:{line:79,column:22}},12:{start:{line:80,column:6},end:{line:80,column:25}},13:{start:{line:83,column:18},end:{line:86,column:7}},14:{start:{line:87,column:16},end:{line:87,column:66}},15:{start:{line:88,column:6},end:{line:94,column:7}},16:{start:{line:89,column:8},end:{line:92,column:10}},17:{start:{line:93,column:8},end:{line:93,column:27}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:51,column:21},end:{line:51,column:22}},loc:{start:{line:51,column:48},end:{line:59,column:11}},line:51},1:{name:"(anonymous_1)",decl:{start:{line:68,column:35},end:{line:68,column:36}},loc:{start:{line:68,column:44},end:{line:72,column:7}},line:68}},branchMap:{0:{loc:{start:{line:52,column:12},end:{line:58,column:13}},type:"if",locations:[{start:{line:52,column:12},end:{line:58,column:13}},{start:{line:52,column:12},end:{line:58,column:13}}],line:52},1:{loc:{start:{line:54,column:18},end:{line:58,column:13}},type:"if",locations:[{start:{line:54,column:18},end:{line:58,column:13}},{start:{line:54,column:18},end:{line:58,column:13}}],line:54},2:{loc:{start:{line:69,column:8},end:{line:71,column:9}},type:"if",locations:[{start:{line:69,column:8},end:{line:71,column:9}},{start:{line:69,column:8},end:{line:71,column:9}}],line:69},3:{loc:{start:{line:88,column:6},end:{line:94,column:7}},type:"if",locations:[{start:{line:88,column:6},end:{line:94,column:7}},{start:{line:88,column:6},end:{line:94,column:7}}],line:88}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,sources:["reset-password.vue?8e98bc76"],names:[],mappings:";;;;;;;;;;;;;;;;;;AAkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA",sourcesContent:['<template>\r\n  <div>\r\n    <b-form :model="ruleForm" :rules="rules" ref="ruleForm" label-width="80px" class="demo-form">\r\n      <b-form-item label="密码" prop="password">\r\n        <b-input type="password" v-model="ruleForm.password"  placeholder="请输入密码"></b-input>\r\n      </b-form-item>\r\n      <b-form-item label="确认密码" prop="cpassword">\r\n        <b-input  type="password" v-model="ruleForm.cpassword"  placeholder="请输确认密码"></b-input>\r\n      </b-form-item>\r\n      <b-form-item>\r\n        <button type="button" class="btn btn-mw btn-primary marginbtn" @click="submitForm()">保存</button>\r\n        <button type="button" class="btn btn-mw btn-default" @click="cancel">取消</button>\r\n      </b-form-item>\r\n    </b-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { BForm, BFormItem } from \'@/components/form\'\r\nimport BInput from \'@/components/input\'\r\nexport default {\r\n  components: {\r\n    BForm,\r\n    BFormItem,\r\n    BInput\r\n  },\r\n  props: {\r\n    editeData: {\r\n      type: Object,\r\n      default: {}\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      ruleForm: {\r\n        password: \'\',\r\n        cpassword: \'\'\r\n      },\r\n      rules: {\r\n        password: [{\r\n          required: true,\r\n          message: \'请输入密码\',\r\n          trigger: \'blur\'\r\n        }, {\r\n          min: 6,\r\n          message: \'密码长度至少为6个字符\',\r\n          trigger: \'blur\'\r\n        }],\r\n        cpassword: [{\r\n          required: true,\r\n          validator: (rule, value, callback) => {\r\n            if (value === \'\') {\r\n              callback(new Error(\'请输确认密码\'))\r\n            }else if (value !== this.ruleForm.password) {\r\n              callback(new Error(\'两次输入密码不一致!\'))\r\n            }else {\r\n              callback()\r\n            }\r\n          },\r\n          trigger: \'blur\'\r\n        }]\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    submitForm () {\r\n      console.log(this.editeData)\r\n      this.$refs.ruleForm.validate(valid => {\r\n        if (valid) {\r\n          this.resetPassword()\r\n        }\r\n      })\r\n    },\r\n    resetForm() {\r\n      this.$refs.ruleForm.resetFields()\r\n    },\r\n    // 取消\r\n    cancel () {\r\n      this.resetForm()\r\n      this.$emit(\'close\')\r\n    },\r\n    async resetPassword () {\r\n      let prams = {\r\n        id: this.editeData.user_id,\r\n        login_password: this.ruleForm.password\r\n      }\r\n      let res = await this.$store.dispatch(\'resetPassword\', prams)\r\n      if (res.code === 200) {\r\n        this.$message({\r\n          message: \'设置新密码成功\',\r\n          type: \'success\'\r\n        })\r\n        this.$emit(\'close\')\r\n      }\r\n    }\r\n  }\r\n}\r\n<\/script>\r\n']},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},o=r[t]||(r[t]={});return o[e]&&o[e].hash===n?o[e]:(s.hash=n,o[e]=s)}(),i=r(601),u=r(203),c=t(u);n.default={components:{BForm:i.BForm,BFormItem:i.BFormItem,BInput:c.default},props:{editeData:{type:Object,default:{}}},data:function(){var e=this;return A.s[0]++,{ruleForm:{password:"",cpassword:""},rules:{password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度至少为6个字符",trigger:"blur"}],cpassword:[{required:!0,validator:function(n,r,t){A.f[0]++,A.s[1]++,""===r?(A.b[0][0]++,A.s[2]++,t(new Error("请输确认密码"))):(A.b[0][1]++,A.s[3]++,r!==e.ruleForm.password?(A.b[1][0]++,A.s[4]++,t(new Error("两次输入密码不一致!"))):(A.b[1][1]++,A.s[5]++,t()))},trigger:"blur"}]}}},methods:{submitForm:function(){var e=this;A.s[6]++,console.log(this.editeData),A.s[7]++,this.$refs.ruleForm.validate(function(n){A.f[1]++,A.s[8]++,n?(A.b[2][0]++,A.s[9]++,e.resetPassword()):A.b[2][1]++})},resetForm:function(){A.s[10]++,this.$refs.ruleForm.resetFields()},cancel:function(){A.s[11]++,this.resetForm(),A.s[12]++,this.$emit("close")},resetPassword:function(){var e=this;return(0,a.default)(o.default.mark(function n(){var r,t;return o.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return A.s[13]++,r={id:e.editeData.user_id,login_password:e.ruleForm.password},A.s[14]++,n.next=4,e.$store.dispatch("resetPassword",r);case 4:t=n.sent,A.s[15]++,200===t.code?(A.b[3][0]++,A.s[16]++,e.$message({message:"设置新密码成功",type:"success"}),A.s[17]++,e.$emit("close")):A.b[3][1]++;case 7:case"end":return n.stop()}},n,e)}))()}}}}});